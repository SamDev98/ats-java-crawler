# ===========================================
# ATS Java Crawler - Optimized Configuration
# ===========================================

# Server Configuration
server.port=8080

# Database Configuration
spring.datasource.url=${DB_URL:jdbc:postgresql://localhost:5432/ats}
spring.datasource.username=${DB_USER:postgres}
spring.datasource.password=${DB_PASS:postgres}
spring.datasource.hikari.maximum-pool-size=5
spring.datasource.hikari.minimum-idle=2
spring.datasource.hikari.connection-timeout=20000

# JPA Configuration
spring.jpa.hibernate.ddl-auto=update
spring.jpa.properties.hibernate.format_sql=false
spring.jpa.properties.hibernate.jdbc.batch_size=20
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true
spring.jpa.show-sql=false

# HTTP Client Configuration (Optimized for GitHub Actions)
http.connect-timeout=10000
http.socket-timeout=15000
http.max-retries=2

# Crawler Configuration
crawler.cron-expression=${CRON_EXPRESSION:0 0 7 * * *}
crawler.cron-zone=${CRON_ZONE:UTC}
crawler.expiry-days=${EXPIRY_DAYS:15}

# ============================================
# ENABLED ATS (Known Working APIs)
# ============================================

# ? Greenhouse (JSON API - Excellent)
crawler.greenhouse-companies=${ATS_GREENHOUSE:vercel,canonical,datadog,brex,figma}

# ? Lever (JSON API - Excellent)
crawler.lever-companies=${ATS_LEVER:zapier,airtable,affirm}

# ? Workable (JSON API - Excellent)
crawler.workable-companies=${ATS_WORKABLE:canonical,hotjar,remote,supermetrics}

# ? Recruitee (JSON API - Good)
crawler.recruitee-companies=${ATS_RECRUITEE:adverity,storyblok,hotjar}

# ? Ashby (HTML Scraping - Fixed)
crawler.ashby-companies=${ATS_ASHBY:linear,vercel,retool}

# ? BreezyHR (HTML Scraping - Fixed)
crawler.breezy-companies=${ATS_BREEZY:zapier,hubstaff,helloalice,everlaw}

# ? Jobvite (HTML Scraping - Fixed)
crawler.jobvite-companies=${ATS_JOBVITE:instacart,doordash}

# ? Teamtailor (JSON API - Migrated, Excellent!)
crawler.teamtailor-companies=${ATS_TEAMTAILOR:klarna,seb,visma}

# ? BambooHR (HTML Scraping - Fixed, but many companies don't use ATS module)
crawler.bamboohr-companies=${ATS_BAMBOOHR:clickup,basecamp,drata,calendly}

# ============================================
# Filter Configuration
# ============================================

# ROLE KEYWORDS - Job must match at least ONE
filter.role-keywords=${ROLE_KEYWORDS:java,spring,spring boot,kotlin,microservices,backend,jvm}

# INCLUDE KEYWORDS - Job must match at least ONE
filter.include-keywords=${INCLUDE_KEYWORDS:remote,work from anywhere,remote anywhere,latam,latin america,brazil,brasil,worldwide,global,international}

# EXCLUDE KEYWORDS - Job must match NONE
filter.exclude-keywords=${EXCLUDE_KEYWORDS:us only,usa only,united states only,on-site,onsite,in-office,senior,staff,principal,lead,manager}

# ============================================
# Integrations
# ============================================

# Discord Notifications
discord.webhook=${DISCORD_WEBHOOK:https://discord.com/api/webhooks/1435040141164023888/59G5zz9sc5fwSsir3R6HZ371WTD3q31BHNRBObVVHxs5NYvGnLmPwfxGqhyClteDRFGs}

# Google Sheets Sync
google.sheets.enabled=${SHEETS_ENABLED:false}
google.sheets.spreadsheetId=${GOOGLE_SHEETS_ID:1_WHrO9_T48OXcQVm8J2sfobyEih4pcJsesTF1N2QeDM}
google.credentials.path=${GOOGLE_APPLICATION_CREDENTIALS:src/main/resources/credentials.json}

# ============================================
# Logging Configuration
# ============================================
logging.level.root=INFO
logging.level.com.atscrawler=INFO
logging.level.org.springframework.web=WARN
logging.level.org.hibernate=WARN

# ============================================
# Performance Tuning for GitHub Actions
# ============================================

# Reduce memory footprint
spring.jpa.properties.hibernate.jdbc.fetch_size=50
spring.jpa.properties.hibernate.cache.use_second_level_cache=false
spring.jpa.properties.hibernate.cache.use_query_cache=false

# Faster startup
spring.jpa.open-in-view=false
spring.main.lazy-initialization=false
